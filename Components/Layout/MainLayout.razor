@using MudBlazor
@using MudBlazor.Services
@using MudBlazor.Components

@inject IHttpContextAccessor _context

@inherits LayoutComponentBase

<MudThemeProvider />
<MudPopoverProvider />

    <MudLayout>
        <MudAppBar>
            <MudText Typo="Typo.h6" Class="ms-2">Alban's Portfolio</MudText>
            <MudSpacer />
            <MudText>Your IP @userIP</MudText>
        </MudAppBar>
        <MudDrawer Variant="DrawerVariant.Persistent"
                   Docked="true"
                   Open="true"
                   ClipMode="@DrawerClipMode.Always"
                   Width="200px">
            <NavMenu />
        </MudDrawer>
        <MudMainContent Class="pt-16">
            @Body
        </MudMainContent>
    </MudLayout>

@code{
    private string userIP { get; set; }

    protected override void OnInitialized()
    {
        userIP = _context.HttpContext?.Connection?.RemoteIpAddress?.ToString() ?? "";
    }
}