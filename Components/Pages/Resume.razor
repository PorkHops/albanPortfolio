@using MudBlazor
@using albanPortfolio.Components.Models
@rendermode InteractiveServer

<MudGrid>
    <MudItem xs="12">
        <MudText Typo="Typo.h4" Class="mb-4">Professional Experience</MudText>

        @* Timeline view for md and up screens *@
        <div class="d-none d-md-block">
            <MudTimeline>
                @foreach (var experience in experiences)
                {
                    <MudTimelineItem Color="Color.Primary">
                        <MudCard Elevation="2" Class="mb-4">
                            <MudCardHeader>
                                <MudCardHeaderContent>
                                    <MudText Typo="Typo.h6">@experience.Title</MudText>
                                    <MudText Typo="Typo.body2" Color="Color.Success">@experience.Period</MudText>
                                    <MudText Typo="Typo.subtitle1">@experience.Company</MudText>
                                </MudCardHeaderContent>
                            </MudCardHeader>
                            <MudCardContent>
                                <MudExpansionPanels>
                                    @foreach (var project in experience.Projects)
                                    {
                                        <MudExpansionPanel>
                                            <TitleContent>
                                                <MudText Typo="Typo.h6">@project.Title</MudText>
                                            </TitleContent>
                                            <ChildContent>
                                                <div class="pa-2">
                                                    @foreach (var achievement in project.Achievements)
                                                    {
                                                        <div class="d-flex align-center mb-2">
                                                            <MudIcon Icon="@Icons.Material.Filled.Check" Color="Color.Primary"
                                                                Size="Size.Small" Class="mr-2" />
                                                            <MudText>@achievement</MudText>
                                                        </div>
                                                    }
                                                </div>
                                            </ChildContent>
                                        </MudExpansionPanel>
                                    }
                                </MudExpansionPanels>
                            </MudCardContent>
                        </MudCard>
                    </MudTimelineItem>
                }
            </MudTimeline>
        </div>

        @* Card view for xs and sm screens *@
        <div class="d-block d-md-none">
            @foreach (var experience in experiences)
            {
                <MudCard Elevation="2" Class="mb-4">
                    <MudCardHeader>
                        <MudCardHeaderContent>
                            <MudText Typo="Typo.h6">@experience.Title</MudText>
                            <MudText Typo="Typo.body2" Color="Color.Success">@experience.Period</MudText>
                            <MudText Typo="Typo.subtitle1">@experience.Company</MudText>
                        </MudCardHeaderContent>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudExpansionPanels>
                            @foreach (var project in experience.Projects)
                            {
                                <MudExpansionPanel>
                                    <TitleContent>
                                        <MudText Typo="Typo.h6">@project.Title</MudText>
                                    </TitleContent>
                                    <ChildContent>
                                        <div class="pa-2">
                                            @foreach (var achievement in project.Achievements)
                                            {
                                                <div class="d-flex align-center mb-2">
                                                    <MudIcon Icon="@Icons.Material.Filled.Check" Color="Color.Primary"
                                                        Size="Size.Small" Class="mr-2" />
                                                    <MudText>@achievement</MudText>
                                                </div>
                                            }
                                        </div>
                                    </ChildContent>
                                </MudExpansionPanel>
                            }
                        </MudExpansionPanels>
                    </MudCardContent>
                </MudCard>
            }
        </div>
    </MudItem>

    <MudItem xs="12">
        <MudText Typo="Typo.h4" Class="mb-4">Education</MudText>
        <MudCard Elevation="2">
            <MudCardContent>
                <MudText Typo="Typo.h6">Bachelor of Science in Engineering</MudText>
                <MudText Typo="Typo.subtitle1">Western Michigan University, Kalamazoo, MI</MudText>
                <MudText Typo="Typo.body2">Graduated: December 2019 | GPA: 3.50</MudText>
            </MudCardContent>
        </MudCard>
    </MudItem>

    <MudItem xs="12">
        <MudText Typo="Typo.h4" Class="mb-4">Additional Skills & Interests</MudText>
        <MudGrid>
            @foreach (var interest in interests)
            {
                <MudItem xs="12" sm="6" md="3">
                    <MudCard Elevation="2" Class="interest-card">
                        <MudCardContent>
                            <MudText>@interest</MudText>
                        </MudCardContent>
                    </MudCard>
                </MudItem>
            }
        </MudGrid>
    </MudItem>
</MudGrid>

@code
{
    private List<Experience> experiences = new()
    {
        new()
        {
            Title    = "Senior Software Engineer",
            Company  = "DataSystemServices",
            Period   = "November 2024 – March 2025",
            Projects = new()
            {
                new()
                {
                    Title        = "Enterprise Web Portal Modernization",
                    Achievements = new()
                    {
                        "Architected a comprehensive Blazor Server web app, delivering the first major homepage update in 20 years",
                        "Optimized performance via load balancing, reducing load times by 40%",
                        "Engineered seamless integration with existing subsystems"
                    }
                },
                new()
                {
                    Title        = "Automated API Testing Framework",
                    Achievements = new()
                    {
                        "Developed automated .NET-based testing service reducing execution time from 1 hour to 10 seconds",
                        "Increased testing frequency 240x through concurrent processing",
                        "Reduced API-related incidents by 80%"
                    }
                }
            }
        },
        new()
        {
            Title = "Software Engineer",
            Company = "General Motors",
            Period = "July 2022 – August 2024",
            Projects = new()
            {
                new()
                {
                    Title = "Map Processing Microservice",
                    Achievements = new()
                    {
                        "Architected high-performance .NET microservice for XML map data",
                        "Achieved 30% reduction in data processing time",
                        "Designed RESTful APIs for downstream service integration"
                    }
                },
                new()
                {
                    Title = "Geofencing System Modernization",
                    Achievements = new()
                    {
                        "Led migration from Python to modern C#.NET architecture",
                        "Improved performance by 60% through parallel processing",
                        "Achieved 90% unit test coverage"
                    }
                }
            }
        },
        new()
        {
            Title = "Data Engineer",
            Company = "General Motors",
            Period = "July 2020 – July 2022",
            Projects = new()
            {
                new()
                {
                    Title = "Data Engineering Achievements",
                    Achievements = new()
                    {
                        "Developed automated data processing system reducing manual work by 75%",
                        "Architected production timing tool resulting in $250k annual savings",
                        "Created scalable SharePoint solutions with custom forms and workflows"
                    }
                }
            }
        }
    };

    private List<string> interests = new()
    {
        "IoT projects using Microcontrollers and CircuitPython",
        "3D Printing and CAD Design",
        "Technical Writing and Documentation",
        "Problem-Solving through Lock Sport and Circuit Design"
    };
}